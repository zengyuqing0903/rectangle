function rectangle(){return{perimeter:function(e,t){return 2*(e+t)},area:function(e,t){return e*t}}}function validate(e){var t={isOK:!1,reason:""};return""===e?t.reason="不能为空！":/^-?(0|[1-9]\d*)(\.\d*)?([eE][+-]?\d+)?$/.test(e)?Number(e)<0?t.reason="必须大于零":t.isOK=!0:t.reason="必须是数值",t}function checkKey(e,t,a){if(/[abcdf-zABCDF-Z`~!@#$%^&*()\-=_+[\]{}|;:'",<>/?\\]/.test(e))return!1;if("."===e){if(0===a||-1!==t.indexOf("."))return!1;if(1===a&&"-"===t.substring(0,1))return!1}if("e"===e){if(0===a||-1!==t.indexOf("e")||-1!==t.indexOf("E"))return!1;if(1===a&&"-"===t.substring(0,1))return!1}if("E"===e){if(0===a||-1!==t.indexOf("e")||-1!==t.indexOf("E"))return!1;if(1===a&&"-"===t.substring(0,1))return!1}return!0}function roundFractional(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}$(function(){var n=$("#width"),s=$("#height"),e=$("#calculate"),u=$("#perimeter"),l=$("#area");$widthValidate=$("#width-validation-message"),$heightValidate=$("#height-validation-message"),isPassValidate=!1,$forkMeGH.show("https://github.com/zengyuqing0903/rectangle"),$bszPageFooter.show("body"),n.keypress(function(e){var t=e.target.value,a=e.target.selectionStart;checkKey(e.key,t,a)||e.preventDefault()}),s.keypress(function(e){var t=e.target.value,a=e.target.selectionStart;checkKey(e.key,t,a)||e.preventDefault()}),n.focusout(function(){var e=validate(n.val());isPassValidate=e.isOK,e.isOK?$widthValidate.html(""):($widthValidate.html("宽度"+e.reason),n.select())}),s.focusout(function(){var e=validate(s.val());isPassValidate=e.isOK,e.isOK?$heightValidate.html(""):($heightValidate.html("高度"+e.reason),s.select())}),e.click(function(){if(isPassValidate){var e=Number(n.val()),t=Number(s.val()),a=rectangle(),i=roundFractional(a.perimeter(e,t),2),r=roundFractional(a.area(e,t),2);u.val(i),l.val(r)}})});